<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width,initial-scale=1.0" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="An overview of how we plan to start building the system" name="description">
    <title>Team 25 - System Design</title>
    <link href="assets/styles/main.css" rel="stylesheet">
    <link href="assets/styles/design.css" rel="stylesheet">

    <script src="https://unpkg.com/ionicons@5.2.3/dist/ionicons/ionicons.esm.js" type="module"></script>
    <script nomodule="" src="https://unpkg.com/ionicons@5.2.3/dist/ionicons/ionicons.js"></script>
    <script crossorigin="anonymous"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
            src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script defer>
        $(function () {
            $("#navbar").load("navbar.html");
            $("#footer").load("footer.html");
        });
    </script>
</head>
<body>
<header id="navbar"></header>
<div class="page">
    <div class="header-card">
        <div class="page-header">
            <h1>System<br>Design</h1>
            <p>This sections outlines the design of our system and looks at its seperate components individually in
                detail. We aim to look at the system from different perspectives, from its architecture to design
                principles to data storage and more.</p>
        </div>
        <div class="image-container noselect"></div>
        <script>
            let title = document.querySelector(".page-header h1");
            let subtitle = document.querySelector(".page-header p");
            const resize = function (subtitle) {
                subtitle.style.maxWidth = title.clientWidth.toString() + "px";
            };
            window.onresize = window.onload = () => {
                resize(subtitle);
            };
        </script>
    </div>

    <section>
        <h2>System Architecture</h2>
        <p></p>
        <div class="diagram image-container">
            <img alt="Overall system architecture" src="assets/images/design/System%20Design%20-%20New%20frame.jpg">
        </div>
    </section>

    <section class="light-page-section centred">
        <h2>Design Principles and Pattern</h2>
    </section>

    <section class="android-app">
        <h2>Android App Architecture</h2>
        <p></p>
        <div class="diagram image-container">
            <img alt="App system architecture" src="assets/images/design/System%20Design%20-%20App.jpg">
        </div>
    </section>

    <section class="web-app light-page-section">
        <h2>Admin Web App Architecture</h2>
        <p>Vue does away with specific view controllers in the Model-View-Controller design pattern meaning we will be
            following a Model-View pattern for the admin web app.</p>
        <div class="diagram image-container">
            <img alt="Admin web app system architecture" src="assets/images/design/System%20Design%20-%20Admin.jpg">
        </div>

        <p>Given that websites can be accessed via mobile devices, we will be employing the Mobile-First design
            principle. That is, we primarily design the website for mobile devices and then apply CSS media queries to
            take advantage of the extra space and functionalities (e.g., a more precise mouse) granted by tablets,
            desktops and laptops. </p>
        <h3>Views</h3>
        <p>A view will be comprised of several components, in line with the Vue design approach where each sub-component
            specifies its style, physical layout and methods. A component may be as general as a page container or as
            specific as a button to another page. Components can be comprised of several smaller sub-components. This
            approach promotes the reusability of components, leading to less duplicated code as well as abstracting the
            functionality of components from one another to make them less coupled with each other. This also allows for
            the interchange of components should our functionality, or design change during the implementation
            stage. </p>
        <h4>Welcome</h4>
        <p>This is the first page the user will see (if not logged in) with two sub-views containing separate forms for
            logging into an existing account and registering for a new one. </p>
        <p>If the user tries to access this page while signed in, they will be redirected to the <b>people</b> view.
        </p>
        <p>Note that users will always be automatically signed in if they have not manually logged out of their
            account.</p>
        <h4>People</h4>
        <p>This view where the admin manages the users in their circle. It is comprised of a sidebar, allowing the user
            to select and focus on one user at a time, and the following sub-views: </p>
        <ul>
            <li><b>Manage</b> – allows the admin to modify the stored details of the selected user – this is the default
                sub-view of the people view.
            </li>
            <li><b>Services</b> – allows the admin to view and modify the data stored for each service currently added
                to the select user’s account. Services can also be removed here.
            </li>
            <li><b>Details</b> – displays the (full) service usage history for the selected user.
            </li>
        </ul>
        <h4>Marketplace</h4>
        <p>This view displays a grid of all available services, allowing the admin to search/filter the services to find
            the one they need. In this view, the admin chooses services to add to their circle of users. </p>
        <h4>Not Found</h4>
        <p>A standard 404 not found view indicates that there is no resource located on this page. From here, the user
            can only be redirected to the welcome view.</p>
        <h3>Backend Interaction</h3>
        <p>The main model object provides an interface to provide the necessary functions to (safely) access and modify
            data stored in the cloud database. Where necessary, the interface returns a string message representing the
            response; this can be used to display meaningful error messages to the users such as <i>“Your username or
                password was incorrect”</i> instead of silently failing. </p>

        <p>Since this main model is written in Java, we cannot directly call it from the Vue app. Instead, the backend
            will be a RESTful API, running on <b>localhost</b> and connected to the cloud database, and make API calls
            to it
            from both the web and Android app. The API will return the necessary responses from the main model. </p>
        <p>Each JSON response shares the following fields:</p>
        <pre>{
    "success": Boolean,
    "message": String,
    "code": Integer
}</pre>
        <p>Along with any other field returned by a specific endpoint.</p>
        <i>Note that <code>code</code> is the HTTP status code, defined by <a
                href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">this</a>
            standard.</i>
        <h3>Data Models</h3>
        <p>The main model is an interface where the concrete implementation is comprised of many other models so the
            front-end does not need to be concerned with what model it needs to access to retrieve the needed data.
            These models include, but are not limited to, admin, user and service models. The models handle interaction
            with data regarding their corresponding entity. The functions of each sub-model will take in parameters and
            specify the necessary SQL commands to be performed on the database. </p>
        <p>There is a further abstraction between the main model (and its sub-models) and the database. The database is
            accessed via a database model which provides functions to query and execute commands on the database. It
            handles the connection to the database as well as any SQL/cloud errors that may occur; this decouples the
            models from the database, allowing us to easily switch to a different cloud hosting service should our
            storage/concurrent access requirements increase. </p>
        <p>The web app will also have its main model which provides an interface, specifying how to access the backend;
            this provides another layer of abstraction to allow our web app, API and
            backend to all work independently. </p>
        <p>While this highly abstracted approach does add an extra layer (the need for an API to handle the interaction
            between the frontend and the backend) to the design, it greatly reduces the coupling between the frontend
            and the backend; this allows us to alter (or even completely switch out) the operation of either layer if
            needed as well as allowing group members to work on either component without being concerned with how the
            other is working. </p>
    </section>

    <section>
        <h2>UML Class Diagram</h2>
    </section>

    <section class="light-page-section centred">
        <h2>Data Storage and Entity Relations</h2>
        <p>We had two databases: a cloud database which would be the more widely used data storage system (for the Admin
            site, FISE Logs etc.). However, we also had localised storage used to store reminders and alarms.</p>
        <div class="er-div">
            <img class="er-img" src="assets/images/design/Cloud ER diagram.png"/>
            <br>
            <img class="er-img" src="assets/images/design/Person ER diagram.png"/>
            <img class="er-img" src="assets/images/design/Localised Storage ER diagram.png"/>
        </div>
    </section>

    <section>
        <h2>Sequence Diagram</h2>
    </section>


    <section class="light-page-section">
        <h2>References</h2>
    </section>

</div>
<footer id="footer"></footer>
</body>
</html>